<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Notes</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <meta name="color-scheme" content="light dark">
</head>
<body>
  <header class="site-header">
    <div class="wrap">
      <h1 class="brand">
        <span class="logo" aria-hidden="true">üóíÔ∏è</span>
        Notes
      </h1>

      <nav aria-label="Page actions" class="actions">
        <button class="toggle-theme" type="button" id="themeToggle" aria-label="Toggle theme">
          <!-- simple sun/moon SVG -->
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 4.5a1 1 0 0 1-1-1V2a1 1 0 1 1 2 0v1.5a1 1 0 0 1-1 1zm0 17a1 1 0 0 1-1 1V24a1 1 0 0 1 2 0v-1.5a1 1 0 0 1-1-1zM4.5 12a1 1 0 0 1-1 1H2a1 1 0 1 1 0-2h1.5a1 1 0 0 1 1 1zm17 0a1 1 0 0 1 1-1H24a1 1 0 1 1 0 2h-1.5a1 1 0 0 1-1-1zM5.64 5.64a1 1 0 0 1-1.41-1.41L5.29 2.17a1 1 0 1 1 1.41 1.41L5.64 5.64zm12.72 12.72a1 1 0 0 1 1.41 1.41l-1.06 1.06a1 1 0 1 1-1.41-1.41l1.06-1.06zM18.36 5.64l-1.06-1.06a1 1 0 1 1 1.41-1.41l1.06 1.06a1 1 0 1 1-1.41 1.41zM5.64 18.36l1.06 1.06a1 1 0 0 1-1.41 1.41L4.23 19.77a1 1 0 1 1 1.41-1.41zM12 7.25A4.75 4.75 0 1 0 16.75 12 4.75 4.75 0 0 0 12 7.25z"/>
          </svg>
        </button>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="composer card" aria-label="Add a new note">
      <form method="POST" action="/add" class="compose-form">
        <div class="fields">
          <input name="title" placeholder="Title" aria-label="Title" required>
          <textarea name="content" rows="4" placeholder="Write your note‚Ä¶" aria-label="Note content" required></textarea>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn primary">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 13H13v6h-2v-6H5v-2h6V5h2v6h6z"/></svg>
            Add note
          </button>
        </div>
      </form>
    </section>

    <section class="notes">
      {% if notes and notes|length > 0 %}
        <div class="notes-grid">
          {% for n in notes %}
          <article class="note card" data-id="{{ n.id }}">
            <header class="note-head">
              <h3 class="note-title">{{ n.title }}</h3>
              <a class="icon-btn danger" href="/delete/{{ n.id }}" aria-label="Delete note">
                <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M16 9v10H8V9h8m-1.5-5h-5l-1 1H6v2h12V5h-2.5l-1-1z"/>
                </svg>
              </a>
            </header>
            <p class="note-body">{{ n.content }}</p>
            <footer class="note-meta">
              <small title="{{ n.created_at }}">{{ n.created_at }}</small>
            </footer>
          </article>
          {% endfor %}
        </div>
      {% else %}
        <article class="empty card" role="status" aria-live="polite">
          <div class="empty-illustration" aria-hidden="true">‚úçÔ∏è</div>
          <h2>No notes yet</h2>
          <p>Start by adding a title and a few thoughts above.</p>
        </article>
      {% endif %}
    </section>
  </main>

  <script>
    // Theme toggle with localStorage; also respects prefers-color-scheme.
    (function () {
      const root = document.documentElement;
      const key = 'notes-theme';
      const saved = localStorage.getItem(key);
      if (saved) root.dataset.theme = saved;

      document.getElementById('themeToggle')?.addEventListener('click', () => {
        const next = (root.dataset.theme === 'dark') ? 'light' : 'dark';
        root.dataset.theme = next;
        localStorage.setItem(key, next);
      });
    })();
  </script>
</body>
</html>
